{"version":3,"sources":["../src/zustand/store/eventGuiStore.ts","../src/components/createObject/applyCustomStyles.ts","../src/hooks/useClipboardActions.ts","../src/hooks/useUndoRedo.ts","../src/hooks/useLockSelection.ts","../src/components/toolbar/index.tsx","../src/components/ui/select/index.tsx","../src/components/sidebar/hooks/useObjectProperties.ts","../src/components/sidebar/hooks/useObjectUpdater.ts","../src/utils/index.ts","../src/components/sidebar/components/commonProperties/index.tsx","../src/components/sidebar/components/circleProperties/index.tsx","../src/components/sidebar/components/rectangleProperties/index.tsx","../src/components/sidebar/components/textProperties/index.tsx","../src/components/sidebar/components/colorProperties/index.tsx","../src/components/sidebar/components/seatAttributes/index.tsx","../src/components/sidebar/index.tsx","../src/components/createObject/index.ts","../src/hooks/useCanvasSetup.ts","../src/hooks/useSelectionHandler.ts","../src/hooks/useMultipleSeatCreator.ts","../src/hooks/useObjectDeletion.ts","../src/hooks/useObjectCreator.ts","../src/hooks/useKeyboardShortcuts.ts","../src/hooks/useSmartSnap.ts","../src/components/index.tsx"],"names":["uuidv4","fabric","useCallback","useEffect","useState","jsxs","jsx","Select","React","Fragment","_a","_b","strokeWidthOptions","LuPlus","useRef"],"mappings":"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","file":"index.js","sourcesContent":["import { create } from 'zustand';\nimport { fabric } from 'fabric';\nimport { v4 as uuidv4 } from 'uuid';\n\ninterface Seat {\n  id: string;\n  left: number;\n  top: number;\n  radius: number;\n  fill: string;\n  stroke: string;\n  text: string;\n  textSize: number;\n  textColor: string;\n}\n\ninterface Zone {\n  id: string;\n  name: string;\n  isChecked: boolean;\n}\n\nexport type Mode =\n  | 'select'\n  | 'one-seat'\n  | 'multiple-seat'\n  | 'shape-square'\n  | 'text';\nexport type Action = null | 'delete' | 'copy' | 'cut' | 'paste';\n\ninterface EventGuiState {\n  // ::::::::::: Loading state\n  loading: boolean;\n\n  // ::::::::::: Canvas\n  canvas: fabric.Canvas | null;\n  setCanvas: (canvas: fabric.Canvas) => void;\n  seats: Seat[];\n  addSeat: (seat: Seat) => void;\n  updateSeat: (id: string, updates: Partial<Seat>) => void;\n  deleteSeat: (id: string) => void;\n  selectedSeatIds: string[];\n\n  // ::::::::::: Mode\n  toolMode: Mode;\n  setToolMode: (mode: Mode) => void;\n\n  // ::::::::::: Action\n  toolAction: Action;\n  setToolAction: (action: Action) => void;\n\n  setSelectedSeatIds: (ids: string[]) => void;\n  isMultipleSeatMode: boolean;\n  setIsMultipleSeatMode: (isCreating: boolean) => void;\n  zones: Zone[];\n  addZone: (name: string) => void;\n  updateZone: (id: string, updates: Partial<Zone>) => void;\n  deleteZone: (id: string) => void;\n  zoomLevel: number;\n  setZoomLevel: (level: number) => void;\n\n  // :::::::::::::::: Clipboard\n  clipboard: fabric.Object[] | null;\n  setClipboard: (objects: fabric.Object[] | null) => void;\n  lastClickedPoint: { x: number; y: number } | null;\n  setLastClickedPoint: (point: { x: number; y: number } | null) => void;\n\n  // New properties for undo/redo functionality\n  undoStack: string[];\n  redoStack: string[];\n  addToUndoStack: (state: string) => void;\n  undo: () => void;\n  redo: () => void;\n\n  snapEnabled: boolean;\n  setSnapEnabled: (enabled: boolean) => void;\n}\n\nexport const useEventGuiStore = create<EventGuiState>((set, get) => ({\n  // ::::::::::::::::::: Loading state\n  loading: false,\n\n  // ::::::::::::::::::: Canvas state\n  canvas: null,\n  setCanvas: (canvas) => set({ canvas }),\n\n  // ::::::::::::::::::: Seat states\n  seats: [],\n  // ::::::::::::::::::: Add Seat\n  addSeat: (seat) => set((state) => ({ seats: [...state.seats, seat] })),\n  // ::::::::::::::::::: Update Seat\n  updateSeat: (id, updates) =>\n    set((state) => ({\n      seats: state.seats.map((seat) =>\n        seat.id === id ? { ...seat, ...updates } : seat\n      ),\n    })),\n  // ::::::::::::::::::: Delete Seat\n  deleteSeat: (id) =>\n    set((state) => ({\n      seats: state.seats.filter((seat) => seat.id !== id),\n    })),\n\n  // ::::::::::::::::::: Selected Seat ID\n  selectedSeatIds: [],\n  setSelectedSeatIds: (ids) => set({ selectedSeatIds: ids }),\n\n  // ::::::::::::::::::: Multiple seat creation mode state\n  isMultipleSeatMode: false,\n  setIsMultipleSeatMode: (isCreating) =>\n    set({ isMultipleSeatMode: isCreating }),\n\n  // ::::::::::::::::::: Zone states\n  zones: [{ id: uuidv4(), name: 'Ground floor', isChecked: true }],\n  // ::::::::::::::::::: Add zone\n  addZone: (name) =>\n    set((state) => ({\n      zones: [...state.zones, { id: uuidv4(), name, isChecked: true }],\n    })),\n  // ::::::::::::::::::: Update zone\n  updateZone: (id, updates) =>\n    set((state) => ({\n      zones: state.zones.map((zone) =>\n        zone.id === id ? { ...zone, ...updates } : zone\n      ),\n    })),\n  // ::::::::::::::::::: Delete zone\n  deleteZone: (id) =>\n    set((state) => ({\n      zones: state.zones.filter((zone) => zone.id !== id),\n    })),\n\n  // ::::::::::::::::::: Zoom level state\n  zoomLevel: 100,\n  setZoomLevel: (level) => set({ zoomLevel: level }),\n\n  // ::::::::::::::::::: Mode state\n  toolMode: 'select',\n  setToolMode: (mode: Mode) => set({ toolMode: mode }),\n\n  // ::::::::::::::::::: Action state\n  toolAction: null,\n  setToolAction: (action: Action) => set({ toolAction: action }),\n\n  // ::::::::::::::::::: Clipboard state\n  clipboard: null,\n  setClipboard: (objects) => set({ clipboard: objects }),\n  lastClickedPoint: null,\n  setLastClickedPoint: (point) => set({ lastClickedPoint: point }),\n\n  // ::::::::::::::::::::: Undo/redo functionality\n  undoStack: [],\n  redoStack: [],\n  addToUndoStack: (state) => {\n    const { loading, undoStack } = get();\n    const lastState = undoStack[undoStack.length - 1];\n\n    if (lastState !== state && !loading) {\n      set((prevState) => ({\n        undoStack: [...prevState.undoStack, state],\n        redoStack: [],\n      }));\n    }\n  },\n\n  // ::::::::::::::: Function: UNDO\n  undo: () => {\n    const { canvas, undoStack, redoStack } = get();\n\n    if (undoStack.length > 1 && canvas) {\n      // :::::::::::::::: set loading to true\n      set({ loading: true });\n\n      const currentState = JSON.stringify(canvas.toJSON());\n      const previousState = undoStack[undoStack.length - 2];\n\n      // ::::::::::::: update the canvas\n      canvas.loadFromJSON(previousState, () => {\n        canvas.getObjects().forEach((obj) => {\n          if (obj instanceof fabric.Circle) {\n            obj.setControlsVisibility({\n              mt: false,\n              mb: false,\n              ml: false,\n              mr: false,\n            });\n          }\n        });\n        canvas.renderAll();\n        set({\n          undoStack: undoStack.slice(0, -1),\n          redoStack: [currentState, ...redoStack],\n        });\n      });\n\n      // ::::::::::::::::: set loading to false\n      set({ loading: false });\n\n      // console.log('\\n\\nundo func: ', undoStack);\n    }\n  },\n\n  // :::::::::::::: Function: REDO\n  redo: () => {\n    const { canvas, undoStack, redoStack } = get();\n\n    if (redoStack.length > 0 && canvas) {\n      // :::::::::::::::: set loading to true\n      set({ loading: true });\n\n      const nextState = redoStack[0];\n\n      // :::::::::::::::: update the canvas\n      canvas.loadFromJSON(nextState, () => {\n        canvas.getObjects().forEach((obj) => {\n          if (obj instanceof fabric.Circle) {\n            obj.setControlsVisibility({\n              mt: false,\n              mb: false,\n              ml: false,\n              mr: false,\n            });\n          }\n        });\n        canvas.renderAll();\n        const currentState = JSON.stringify(\n          canvas.toJSON([\n            'id',\n            'borderColor',\n            'borderDashArray',\n            'cornerColor',\n            'cornerSize',\n            'cornerStrokeColor',\n            'transparentCorners',\n            'rx',\n            'ry',\n          ])\n        );\n        set({\n          undoStack: [...undoStack, currentState],\n          redoStack: redoStack.slice(1),\n        });\n      });\n\n      // ::::::::::::::::: set loading to false\n      set({ loading: false });\n\n      // console.log('\\n\\nredo func: ', undoStack, '\\n\\nredo stack: ', redoStack);\n    }\n  },\n\n  snapEnabled: false,\n  setSnapEnabled: (enabled) => set({ snapEnabled: enabled }),\n}));\n","import { fabric } from 'fabric';\r\n\r\nexport function applyCustomStyles(obj: fabric.Object) {\r\n  obj.set({\r\n    borderColor: 'green',\r\n    borderDashArray: [2, 4],\r\n    padding: 2,\r\n    cornerColor: 'lightblue',\r\n    cornerSize: 5,\r\n    cornerStrokeColor: 'blue',\r\n    transparentCorners: false,\r\n    strokeUniform: true,\r\n  });\r\n  obj.setControlsVisibility &&\r\n    obj.setControlsVisibility({\r\n      mt: false,\r\n      mb: false,\r\n      ml: false,\r\n      mr: false,\r\n    });\r\n}\r\n","import { useEventGuiStore } from '@/zustand';\nimport { fabric } from 'fabric';\nimport { v4 as uuidv4 } from 'uuid';\nimport { applyCustomStyles } from '@/components/createObject/applyCustomStyles';\n\nconst useClipboardActions = () => {\n  const { canvas, clipboard, setClipboard, lastClickedPoint, setToolAction } =\n    useEventGuiStore();\n\n  // :::::::::::::::::::::::::: Function: copy objects\n  const copySelectedObjects = async () => {\n    if (!canvas) return;\n\n    const activeObjects = canvas.getActiveObjects();\n    if (activeObjects.length === 0) return;\n\n    // ::::::::::::: Set action to copy\n    setToolAction('copy');\n\n    const clonedObjects: fabric.Object[] = [];\n    for (const obj of activeObjects) {\n      await new Promise<void>((resolve) => {\n        obj.clone((cloned: fabric.Object) => {\n          // Assign a new ID if needed\n          if ('id' in cloned) (cloned as any).id = uuidv4();\n          clonedObjects.push(cloned);\n          resolve();\n        });\n      });\n    }\n    setClipboard(clonedObjects);\n  };\n\n  // :::::::::::::::::::::::::: Function: cut objects\n  const cutSelectedObjects = async () => {\n    if (!canvas) return;\n\n    const activeObjects = canvas.getActiveObjects();\n    if (activeObjects.length === 0) return;\n\n    // ::::::::::::: Set action to cut\n    setToolAction('cut');\n\n    const clonedObjects: fabric.Object[] = [];\n    for (const obj of activeObjects) {\n      await new Promise<void>((resolve) => {\n        obj.clone((cloned: fabric.Object) => {\n          if ('id' in cloned) (cloned as any).id = uuidv4();\n          clonedObjects.push(cloned);\n          resolve();\n        });\n      });\n    }\n    setClipboard(clonedObjects);\n\n    canvas.remove(...activeObjects);\n    canvas.discardActiveObject();\n    canvas.renderAll();\n  };\n\n  // :::::::::::::::::::::::::: Function: paste objects\n  const pasteObjects = async () => {\n    if (!canvas || !clipboard || !lastClickedPoint) return;\n\n    setToolAction('paste');\n\n    const pastedObjects: fabric.Object[] = [];\n    for (const obj of clipboard) {\n      await new Promise<void>((resolve) => {\n        obj.clone((cloned: fabric.Object) => {\n          if ('id' in cloned) (cloned as any).id = uuidv4();\n          applyCustomStyles(cloned);\n          // Offset the new object so it's not directly on top\n          cloned.set({\n            left: (cloned.left || 0) + 20,\n            top: (cloned.top || 0) + 20,\n            evented: true,\n          });\n          canvas.add(cloned);\n          pastedObjects.push(cloned);\n          resolve();\n        });\n      });\n    }\n\n    if (pastedObjects.length === 1) {\n      canvas.setActiveObject(pastedObjects[0]);\n    } else if (pastedObjects.length > 1) {\n      const selection = new fabric.ActiveSelection(pastedObjects, { canvas });\n      canvas.setActiveObject(selection);\n    }\n    canvas.requestRenderAll();\n  };\n\n  const getBoundingBox = (objects: fabric.Object[]) => {\n    let minX = Infinity,\n      minY = Infinity,\n      maxX = -Infinity,\n      maxY = -Infinity;\n\n    objects.forEach((obj) => {\n      const objBoundingRect = obj.getBoundingRect();\n      minX = Math.min(minX, objBoundingRect.left);\n      minY = Math.min(minY, objBoundingRect.top);\n      maxX = Math.max(maxX, objBoundingRect.left + objBoundingRect.width);\n      maxY = Math.max(maxY, objBoundingRect.top + objBoundingRect.height);\n    });\n\n    return { left: minX, top: minY, width: maxX - minX, height: maxY - minY };\n  };\n\n  return { copySelectedObjects, cutSelectedObjects, pasteObjects };\n};\n\nexport default useClipboardActions;\n\n// // import '../fabricCustomRegistration';\n// import { useEventGuiStore } from '@/zustand';\n// import { fabric } from 'fabric';\n// import React, { useRef } from 'react';\n\n// function useRegisterFabricCustomClasses() {\n//   const registered = useRef(false);\n//   if (!registered.current) {\n//     if (!(fabric as any).CustomRect) {\n//       (fabric as any).CustomRect = CustomRect;\n//       (CustomRect as any).fromObject = function (object: any, callback: any) {\n//         return fabric.Object._fromObject(CustomRect, object, callback);\n//       };\n//     }\n//     if (!(fabric as any).CustomCircle) {\n//       (fabric as any).CustomCircle = CustomCircle;\n//       (CustomCircle as any).fromObject = function (object: any, callback: any) {\n//         return fabric.Object._fromObject(CustomCircle, object, callback);\n//       };\n//     }\n//     if (!(fabric as any).CustomText) {\n//       (fabric as any).CustomText = CustomText;\n//       (CustomText as any).fromObject = function (object: any, callback: any) {\n//         return fabric.Object._fromObject(CustomText, object, callback);\n//       };\n//     }\n//     registered.current = true;\n//   }\n// }\n\n// const PASTE_OFFSET = 25;\n\n// const useClipboardActions = () => {\n//   useRegisterFabricCustomClasses();\n//   const { canvas, setToolAction } = useEventGuiStore();\n//   // Local clipboard and paste count\n//   const clipboardRef = React.useRef<fabric.Object[] | null>(null);\n//   const pasteCountRef = React.useRef(0);\n\n//   // Copy selected objects\n//   const copySelectedObjects = () => {\n//     if (!canvas) return;\n//     const activeObjects = canvas.getActiveObjects();\n//     if (activeObjects.length === 0) return;\n//     setToolAction('copy');\n//     // Deep clone for clipboard\n//     clipboardRef.current = activeObjects.map((obj) =>\n//       obj.clone ? obj.clone() : fabric.util.object.clone(obj)\n//     );\n//     pasteCountRef.current = 0;\n//   };\n\n//   // Cut selected objects\n//   const cutSelectedObjects = () => {\n//     if (!canvas) return;\n//     const activeObjects = canvas.getActiveObjects();\n//     if (activeObjects.length === 0) return;\n//     setToolAction('cut');\n//     clipboardRef.current = activeObjects.map((obj) =>\n//       obj.clone ? obj.clone() : fabric.util.object.clone(obj)\n//     );\n//     pasteCountRef.current = 0;\n//     canvas.remove(...activeObjects);\n//     canvas.discardActiveObject();\n//     canvas.renderAll();\n//   };\n\n//   // Paste objects with offset\n//   const pasteObjects = () => {\n//     if (!canvas || !clipboardRef.current || clipboardRef.current.length === 0)\n//       return;\n//     setToolAction('paste');\n//     // Clone objects for pasting\n//     const pastedObjects = clipboardRef.current.map((obj) =>\n//       obj.clone ? obj.clone() : fabric.util.object.clone(obj)\n//     );\n//     // Compute bounding box of originals\n//     const boundingBox = getBoundingBox(pastedObjects);\n//     const canvasWidth = canvas.getWidth();\n//     const canvasHeight = canvas.getHeight();\n//     // Offset increases with each paste\n//     const offset = PASTE_OFFSET * (pasteCountRef.current + 1);\n//     let newLeft = boundingBox.left + offset;\n//     let newTop = boundingBox.top + offset;\n//     // Clamp to canvas\n//     if (newLeft + boundingBox.width > canvasWidth)\n//       newLeft = canvasWidth - boundingBox.width;\n//     if (newLeft < 0) newLeft = 0;\n//     if (newTop + boundingBox.height > canvasHeight)\n//       newTop = canvasHeight - boundingBox.height;\n//     if (newTop < 0) newTop = 0;\n//     const actualOffsetX = newLeft - boundingBox.left;\n//     const actualOffsetY = newTop - boundingBox.top;\n//     // Place and add to canvas\n//     pastedObjects.forEach((obj) => {\n//       obj.set({\n//         left: (obj.left || 0) + actualOffsetX,\n//         top: (obj.top || 0) + actualOffsetY,\n//         evented: true,\n//         selectable: true,\n//       });\n//       canvas.add(obj);\n//     });\n//     // Select pasted objects\n//     canvas.discardActiveObject();\n//     if (pastedObjects.length === 1) {\n//       canvas.setActiveObject(pastedObjects[0]);\n//     } else if (pastedObjects.length > 1) {\n//       const group = new fabric.ActiveSelection(pastedObjects, { canvas });\n//       canvas.setActiveObject(group);\n//     }\n//     canvas.requestRenderAll();\n//     pasteCountRef.current += 1;\n//   };\n\n//   // Helper: get bounding box\n//   const getBoundingBox = (objects: fabric.Object[]) => {\n//     let minX = Infinity,\n//       minY = Infinity,\n//       maxX = -Infinity,\n//       maxY = -Infinity;\n//     objects.forEach((obj) => {\n//       const rect = obj.getBoundingRect();\n//       minX = Math.min(minX, rect.left);\n//       minY = Math.min(minY, rect.top);\n//       maxX = Math.max(maxX, rect.left + rect.width);\n//       maxY = Math.max(maxY, rect.top + rect.height);\n//     });\n//     return { left: minX, top: minY, width: maxX - minX, height: maxY - minY };\n//   };\n\n//   return { copySelectedObjects, cutSelectedObjects, pasteObjects };\n// };\n\n// export default useClipboardActions;\n// export { useRegisterFabricCustomClasses };\n","// import '../fabricCustomRegistration';\nimport { useEffect, useCallback } from 'react';\nimport { useEventGuiStore } from '@/zustand';\n\nconst useUndoRedo = () => {\n  const { canvas, addToUndoStack, undo, redo, undoStack } = useEventGuiStore();\n\n  // :::::::::::::::: Function: appends undo state\n  const handleObjectModified = useCallback(() => {\n    if (canvas) {\n      const jsonState = JSON.stringify(\n        canvas.toJSON([\n          'id',\n          'borderColor',\n          'borderDashArray',\n          'cornerColor',\n          'cornerSize',\n          'cornerStrokeColor',\n          'transparentCorners',\n          'rx',\n          'ry',\n        ])\n      );\n      addToUndoStack(jsonState);\n    }\n  }, [canvas, addToUndoStack]);\n\n  useEffect(() => {\n    if (!canvas) return;\n\n    const eventsToListen = [\n      'object:modified',\n      'object:added',\n      'object:removed',\n    ];\n\n    // ::::::::::::::: Loop through events to call function\n    eventsToListen.forEach((event) => {\n      canvas.on(event, handleObjectModified);\n    });\n\n    return () => {\n      eventsToListen.forEach((event) => {\n        canvas.off(event, handleObjectModified);\n      });\n    };\n  }, [canvas, addToUndoStack]);\n\n  return { undo, redo };\n};\n\nexport default useUndoRedo;\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nexport function useLockSelection(canvas: fabric.Canvas | null) {\r\n  // Returns true if all selected objects are locked\r\n  const isSelectionLocked = useCallback(() => {\r\n    if (!canvas) return false;\r\n    const selected = canvas.getActiveObjects();\r\n    return (\r\n      selected.length > 0 &&\r\n      selected.every((obj) => obj.lockMovementX && obj.lockMovementY)\r\n    );\r\n  }, [canvas]);\r\n\r\n  // Toggle lock state for all selected objects\r\n  const toggleLockSelection = useCallback(() => {\r\n    if (!canvas) return;\r\n    const selected = canvas.getActiveObjects();\r\n    if (selected.length === 0) return;\r\n    const shouldLock = !isSelectionLocked();\r\n    selected.forEach((obj) => {\r\n      obj.set({\r\n        lockMovementX: shouldLock,\r\n        lockMovementY: shouldLock,\r\n      });\r\n    });\r\n    canvas.requestRenderAll();\r\n    // If multiple objects, re-select the group to update controls\r\n    if (selected.length > 1) {\r\n      canvas.discardActiveObject();\r\n      const group = new fabric.ActiveSelection(selected, { canvas });\r\n      canvas.setActiveObject(group);\r\n      canvas.requestRenderAll();\r\n    }\r\n    // Fire a custom event so UI can update immediately\r\n    canvas.fire('lock:changed');\r\n  }, [canvas, isSelectionLocked]);\r\n\r\n  // State for forcing re-render on selection/lock change\r\n  const [selectionVersion, setSelectionVersion] = useState(0);\r\n  useEffect(() => {\r\n    if (!canvas) return;\r\n    const update = () => setSelectionVersion((v) => v + 1);\r\n    canvas.on('selection:created', update);\r\n    canvas.on('selection:updated', update);\r\n    canvas.on('lock:changed', update);\r\n    return () => {\r\n      canvas.off('selection:created', update);\r\n      canvas.off('selection:updated', update);\r\n      canvas.off('lock:changed', update);\r\n    };\r\n  }, [canvas]);\r\n\r\n  return { isSelectionLocked, toggleLockSelection, selectionVersion };\r\n}\r\n","import React, { useState, useEffect } from 'react';\nimport { useEventGuiStore } from '@/zustand';\nimport useClipboardActions from '@/hooks/useClipboardActions';\nimport useUndoRedo from '@/hooks/useUndoRedo';\nimport { useLockSelection } from '@/hooks/useLockSelection';\nimport {\n  LuFile,\n  LuFolderOpen,\n  LuSave,\n  LuMousePointer,\n  LuClipboardCheck,\n  LuLayoutDashboard,\n  LuPlus,\n  LuGrid2X2,\n  LuUndo,\n  LuRedo,\n  LuScissors,\n  LuCopy,\n  LuTrash2,\n  LuZoomIn,\n  LuZoomOut,\n  LuLock,\n} from 'react-icons/lu';\nimport {\n  RiText,\n  RiShapeLine,\n  RiApps2AddLine,\n  RiLockUnlockLine,\n} from 'react-icons/ri';\n\nconst Toolbar: React.FC = () => {\n  const {\n    zoomLevel,\n    setZoomLevel,\n    toolMode,\n    setToolMode,\n    toolAction,\n    setToolAction,\n    canvas,\n    snapEnabled,\n    setSnapEnabled,\n  } = useEventGuiStore();\n\n  const { copySelectedObjects, cutSelectedObjects, pasteObjects } =\n    useClipboardActions();\n  const { undo, redo } = useUndoRedo();\n\n  const { isSelectionLocked, toggleLockSelection } = useLockSelection(canvas);\n\n  // ::::::::::::::::::: Function: toggle create multiple seats mode\n  const toggleMultipleSeatMode = () => {\n    setToolMode(toolMode === 'multiple-seat' ? 'select' : 'multiple-seat');\n  };\n\n  // ::::::::::::::::::: Buttons data\n  const buttonGroups = [\n    { icon: LuFile, tooltip: 'New File', onClick: () => {}, state: false },\n    {\n      icon: LuFolderOpen,\n      tooltip: 'Open File',\n      onClick: () => {},\n      state: false,\n    },\n    { icon: LuSave, tooltip: 'Save File', onClick: () => {}, state: false },\n    {\n      icon: LuMousePointer,\n      tooltip: 'Select',\n      onClick: () => {\n        setToolMode('select');\n      },\n      state: toolMode === 'select',\n    },\n    {\n      icon: LuGrid2X2,\n      tooltip: snapEnabled ? 'Smart Snap On' : 'Smart Snap Off',\n      onClick: () => setSnapEnabled(!snapEnabled),\n      state: snapEnabled,\n    },\n    {\n      icon: LuLayoutDashboard,\n      tooltip: 'Layout View',\n      onClick: () => {},\n      state: false,\n    },\n    {\n      icon: RiText,\n      tooltip: 'Add Text',\n      onClick: () => {\n        setToolMode('text');\n      },\n      state: toolMode === 'text',\n    },\n    {\n      icon: RiShapeLine,\n      tooltip: 'Add Square',\n      onClick: () => {\n        setToolMode('shape-square');\n      },\n      state: toolMode === 'shape-square',\n    },\n    {\n      icon: LuPlus,\n      tooltip: 'Add Seat',\n      onClick: () => {\n        setToolMode('one-seat');\n      },\n      state: toolMode === 'one-seat',\n    },\n    {\n      icon: RiApps2AddLine,\n      tooltip: 'Add Rows',\n      onClick: toggleMultipleSeatMode,\n      state: toolMode === 'multiple-seat',\n    },\n    { icon: LuUndo, tooltip: 'Undo', onClick: undo, state: false },\n    { icon: LuRedo, tooltip: 'Redo', onClick: redo, state: false },\n    {\n      icon: LuScissors,\n      tooltip: 'Cut',\n      onClick: cutSelectedObjects,\n      state: toolAction === 'cut',\n    },\n    {\n      icon: LuCopy,\n      tooltip: 'Copy',\n      onClick: copySelectedObjects,\n      state: toolAction === 'copy',\n    },\n    {\n      icon: LuClipboardCheck,\n      tooltip: 'Paste',\n      onClick: pasteObjects,\n      state: toolAction === 'paste',\n    },\n    {\n      icon: LuTrash2,\n      tooltip: 'Delete',\n      onClick: () => {\n        setToolAction('delete');\n      },\n      state: false, // toolAction === 'delete'\n    },\n  ];\n\n  return (\n    <div className=\"sticky left-0 top-0 z-[200] flex w-full items-center gap-1 bg-white px-[1rem] py-[0.5rem] shadow\">\n      {buttonGroups.map((item, index) => (\n        <React.Fragment key={index}>\n          {/* :::::::::::::: add seperator */}\n          {[6, 10, 12].includes(index) && (\n            <Separator key={`seperator-${index}`} />\n          )}\n\n          {/* :::::::::::::: add space */}\n          {3 === index && <div className=\"flex-1\" key={`space-${index}`} />}\n\n          {/* ::::::::::::::: buttons */}\n          <Button\n            key={`button-${index}`}\n            icon={<item.icon className=\"h-4 w-4\" />}\n            tooltip={item.tooltip}\n            onClick={item.onClick}\n            state={item.state}\n          />\n        </React.Fragment>\n      ))}\n\n      {/* :::::::::::::: add seperator */}\n      <Separator />\n\n      {/* :::::::::::::: zoom button */}\n      <Button\n        icon={<LuZoomOut className=\"h-4 w-4\" />}\n        tooltip=\"Zoom Out\"\n        onClick={() => setZoomLevel(zoomLevel - 10)}\n      />\n      <div className=\"flex h-8 w-12 items-center justify-center text-sm font-medium\">\n        {zoomLevel}%\n      </div>\n      <Button\n        icon={<LuZoomIn className=\"h-4 w-4\" />}\n        tooltip=\"Zoom In\"\n        onClick={() => setZoomLevel(zoomLevel + 10)}\n      />\n\n      {/* ::::::::::::::: add space */}\n      <div className=\"flex-1\" />\n\n      {/* ::::::::::::::: Lock/Unlock button */}\n      <Button\n        icon={\n          isSelectionLocked() ? (\n            <LuLock className=\"h-4 w-4\" />\n          ) : (\n            <RiLockUnlockLine className=\"h-4 w-4\" />\n          )\n        }\n        tooltip={isSelectionLocked() ? 'Unlock Selection' : 'Lock Selection'}\n        onClick={toggleLockSelection}\n      />\n    </div>\n  );\n};\n\nexport default Toolbar;\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  icon: React.ReactNode;\n  tooltip: string;\n  state?: boolean;\n}\n\nconst Button: React.FC<ButtonProps> = ({ icon, tooltip, state, ...props }) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  return (\n    <div className=\"relative\">\n      <button\n        className={`rounded-md p-2 hover:bg-gray-200/60 ${\n          state ? 'shadow-sm shadow-gray-400 ring-1 ring-gray-400' : ''\n        } ease-250 active:bg-gray-200 `}\n        onMouseEnter={() => setShowTooltip(true)}\n        onMouseLeave={() => setShowTooltip(false)}\n        {...props}\n      >\n        {icon}\n      </button>\n\n      <div\n        className={`absolute left-1/2 -translate-x-1/2 transform ${\n          showTooltip\n            ? 'top-[calc(100%+0.5rem)] opacity-100'\n            : 'top-[100%] opacity-0'\n        } ease-250 whitespace-nowrap rounded bg-gray-200 px-2 py-1 text-[0.625rem] text-gray-900 shadow-md`}\n      >\n        {tooltip}\n      </div>\n    </div>\n  );\n};\n\nconst Separator: React.FC = () => (\n  <div className=\"mx-[1rem] h-6 w-px bg-gray-300 \" />\n);\n","import React, { useState, useRef, useEffect } from 'react';\n\ninterface SelectOption {\n  value: string;\n  label: string;\n}\n\ninterface SelectProps {\n  options: SelectOption[];\n  value: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n}\n\nconst Select: React.FC<SelectProps> = ({\n  options,\n  value,\n  onChange,\n  placeholder = 'Select an option',\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const selectRef = useRef<HTMLDivElement>(null);\n  const [dropdownPosition, setDropdownPosition] = useState<'top' | 'bottom'>(\n    'bottom'\n  );\n\n  const handleToggle = () => setIsOpen(!isOpen);\n\n  const handleOptionClick = (optionValue: string) => {\n    onChange(optionValue);\n    setIsOpen(false);\n  };\n\n  const handleClickOutside = (event: MouseEvent) => {\n    if (\n      selectRef.current &&\n      !selectRef.current.contains(event.target as Node)\n    ) {\n      setIsOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const selectedOption = options.find((option) => option.value === value);\n\n  // :::::::::::::::::::: Set dropdown position based on bottom space\n  const calculateDropdownPosition = () => {\n    if (selectRef.current) {\n      const { bottom } = selectRef.current.getBoundingClientRect();\n      const windowHeight = window.innerHeight;\n\n      // :::::::::::::::::::::: Check if there is enough space below\n      if (windowHeight - bottom < 120) {\n        setDropdownPosition('top');\n      } else {\n        setDropdownPosition('bottom');\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      calculateDropdownPosition();\n    }\n  }, [isOpen]);\n\n  return (\n    <div ref={selectRef} className=\"relative\">\n      <div\n        className=\"flex w-full cursor-pointer items-center justify-between rounded-md border border-solid border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500\"\n        onClick={handleToggle}\n      >\n        <span className=\"block truncate\">\n          {selectedOption ? selectedOption.label : placeholder}\n        </span>\n        <span className=\"pointer-events-none\">\n          <svg\n            className=\"h-5 w-5 text-gray-400\"\n            viewBox=\"0 0 20 20\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n          >\n            <path\n              d=\"M7 7l3-3 3 3m0 6l-3 3-3-3\"\n              strokeWidth=\"1.5\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n        </span>\n      </div>\n      {/* {isOpen && ( */}\n      <div\n        className={`absolute z-10 mt-1 w-full overflow-hidden rounded-[8px] border border-solid border-gray-300 bg-white shadow-lg ${dropdownPosition === 'top' ? 'bottom-full mb-1' : 'top-full mt-1'} ${isOpen ? 'user-select-auto visible opacity-100' : 'user-select-none invisible select-none opacity-0'} ease-250`}\n      >\n        <ul className=\"max-h-60 overflow-auto text-base focus:outline-none sm:text-sm\">\n          {options.map((option) => (\n            <li\n              key={option.value}\n              className={`relative cursor-pointer select-none py-2 pl-3 pr-9 ${\n                value === option.value\n                  ? 'bg-gray-100 text-gray-600'\n                  : 'text-gray-900 hover:bg-gray-50'\n              }`}\n              onClick={() => handleOptionClick(option.value)}\n            >\n              <span className=\"block truncate\">{option.label}</span>\n              {value === option.value && (\n                <span className=\"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-600\">\n                  <svg\n                    className=\"h-5 w-5\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                </span>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n      {/* )} */}\n    </div>\n  );\n};\n\nexport default Select;\n","import { useState, useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport { Pattern, Gradient } from 'fabric/fabric-impl';\nimport { CustomFabricObject } from '@/types/fabric-types';\n\nexport interface Properties {\n  angle: number;\n  radius: number | 'mixed';\n  width: number;\n  height: number;\n  fill: string | Pattern | Gradient | undefined;\n  stroke: string | Pattern | Gradient | undefined;\n  text: string;\n  fontSize: number;\n  fontWeight: string;\n  fontFamily: string;\n  left: number;\n  top: number;\n  rx?: number;\n  ry?: number;\n  seatNumber?: string | 'mixed';\n  category?: string | 'mixed';\n  price?: number | 'mixed';\n  status?: 'available' | 'reserved' | 'sold' | 'mixed';\n}\n\nexport const useObjectProperties = (\n  canvas: fabric.Canvas | null,\n  selectedObjects: CustomFabricObject[]\n) => {\n  // ::::::::::::::::::: Properties state\n  const [properties, setProperties] = useState<Properties>({\n    angle: 0,\n    radius: 10,\n    width: 100,\n    height: 100,\n    fill: 'transparent' as string | undefined,\n    stroke: '#000000' as string | undefined,\n    text: '',\n    fontSize: 20,\n    fontWeight: 'normal',\n    fontFamily: 'sans-serif',\n    left: 0,\n    top: 0,\n  });\n\n  function getMergedValue<T>(objs: any[], key: string) {\n    if (objs.length === 0) return '';\n    const first = objs[0][key];\n    return objs.every((obj) => obj[key] === first) ? first : 'mixed';\n  }\n\n  useEffect(() => {\n    if (!selectedObjects || selectedObjects.length === 0) return;\n    const objs = selectedObjects;\n    setProperties({\n      angle: getMergedValue(objs, 'angle'),\n      radius: getMergedValue(objs, 'radius'),\n      width:\n        getMergedValue(objs, 'width') * (getMergedValue(objs, 'scaleX') || 1),\n      height:\n        getMergedValue(objs, 'height') * (getMergedValue(objs, 'scaleY') || 1),\n      fill: getMergedValue(objs, 'fill'),\n      stroke: getMergedValue(objs, 'stroke'),\n      text: getMergedValue(objs, 'text'),\n      fontSize: getMergedValue(objs, 'fontSize'),\n      fontWeight: getMergedValue(objs, 'fontWeight'),\n      fontFamily: getMergedValue(objs, 'fontFamily'),\n      left: getMergedValue(objs, 'left'),\n      top: getMergedValue(objs, 'top'),\n      rx: getMergedValue(objs, 'rx'),\n      ry: getMergedValue(objs, 'ry'),\n      seatNumber: getMergedValue(objs, 'seatNumber'),\n      category: getMergedValue(objs, 'category'),\n      price: getMergedValue(objs, 'price'),\n      status: getMergedValue(objs, 'status'),\n    });\n  }, [selectedObjects]);\n\n  return { properties, setProperties };\n};\n","import { fabric } from 'fabric';\nimport { CustomFabricObject } from '@/types/fabric-types';\nimport { Properties } from './useObjectProperties';\nimport { useEffect } from 'react';\n\nexport const useObjectUpdater = (\n  canvas: fabric.Canvas | null,\n  setProperties: React.Dispatch<React.SetStateAction<Properties>>,\n  lockAspect: boolean = false\n) => {\n  // --- Effect: Listen for scaling circles and update radius ---\n  useEffect(() => {\n    if (!canvas) return;\n    const handleScaling = (e: fabric.IEvent) => {\n      const obj = e.target as CustomFabricObject;\n      if (!obj) return;\n      if (obj.type === 'circle') {\n        // Single circle scaling\n        const newRadius =\n          (obj.radius || (obj.width ? obj.width / 2 : 0)) * (obj.scaleX || 1);\n        obj.set({\n          radius: newRadius,\n          scaleX: 1,\n          scaleY: 1,\n          width: newRadius * 2,\n          height: newRadius * 2,\n        });\n        obj.setCoords();\n        canvas.renderAll();\n        setProperties((prev) => ({ ...prev, radius: newRadius }));\n      } else if (obj.type === 'activeSelection' && 'getObjects' in obj) {\n        // Group scaling\n        const selection = obj as fabric.ActiveSelection;\n        const circles = (selection.getObjects() as CustomFabricObject[]).filter(\n          (o) => o.type === 'circle'\n        );\n        let radii: number[] = [];\n        circles.forEach((circle) => {\n          const newRadius =\n            (circle.radius || (circle.width ? circle.width / 2 : 0)) *\n            (circle.scaleX || 1);\n          circle.set({\n            radius: newRadius,\n            scaleX: 1,\n            scaleY: 1,\n            width: newRadius * 2,\n            height: newRadius * 2,\n          });\n          circle.setCoords();\n          radii.push(newRadius);\n        });\n        canvas.renderAll();\n        // If all radii are the same, show it, else show 'mixed'\n        const allSame = radii.every((r) => r === radii[0]);\n        setProperties((prev) => ({\n          ...prev,\n          radius: allSame ? radii[0] : 'mixed',\n        }));\n      }\n    };\n    canvas.on('object:scaling', handleScaling);\n    return () => {\n      canvas.off('object:scaling', handleScaling);\n    };\n  }, [canvas, setProperties]);\n\n  const updateObject = (updates: Partial<Properties>) => {\n    if (!canvas) return;\n\n    const activeObjects = canvas.getActiveObjects() as CustomFabricObject[];\n    if (activeObjects.length === 0) return;\n\n    activeObjects.forEach((selectedObject) => {\n      const updatedProperties: Partial<CustomFabricObject> = {};\n      for (const [key, value] of Object.entries(updates)) {\n        if (selectedObject[key as keyof CustomFabricObject] !== value) {\n          updatedProperties[key as keyof CustomFabricObject] = value;\n        }\n      }\n\n      // Ensure stroke is always a string when it's being updated\n      if (\n        'stroke' in updatedProperties &&\n        updatedProperties.stroke !== undefined\n      ) {\n        updatedProperties.stroke = String(updatedProperties.stroke);\n      }\n\n      // Special handling for circle objects - only use radius\n      if (selectedObject.type === 'circle') {\n        if ('width' in updates || 'height' in updates) {\n          const currentRadius = selectedObject.radius || 0;\n          const newRadius = updates.width\n            ? updates.width / 2\n            : updates.height\n              ? updates.height / 2\n              : currentRadius;\n          selectedObject.set({\n            radius: newRadius,\n            scaleX: 1,\n            scaleY: 1,\n            width: newRadius * 2,\n            height: newRadius * 2,\n          });\n          delete updatedProperties.width;\n          delete updatedProperties.height;\n        }\n      } else {\n        // Special handling for width/height for non-circle objects\n        if ('width' in updates && updates.width !== undefined) {\n          const renderedWidth = updates.width;\n          const currentScaleX = selectedObject.scaleX || 1;\n          selectedObject.set({\n            width: renderedWidth / currentScaleX,\n            scaleX: 1,\n            height: lockAspect\n              ? renderedWidth / currentScaleX\n              : selectedObject.height,\n          });\n          delete updatedProperties.width;\n        }\n        if ('height' in updates && updates.height !== undefined) {\n          const renderedHeight = updates.height;\n          const currentScaleY = selectedObject.scaleY || 1;\n          selectedObject.set({\n            height: renderedHeight / currentScaleY,\n            scaleY: 1,\n            width: lockAspect\n              ? renderedHeight / currentScaleY\n              : selectedObject.width,\n          });\n          delete updatedProperties.height;\n        }\n      }\n\n      selectedObject.set(updatedProperties);\n\n      // :::::::::::: Ensures the text's scales remains 1, only font-size should change\n      if (selectedObject.type === 'i-text') {\n        selectedObject.set({\n          scaleX: 1,\n          scaleY: 1,\n        });\n      }\n\n      // --- Improved auto-snap to canvas edge after rotation ---\n      if (Object.prototype.hasOwnProperty.call(updates, 'angle')) {\n        selectedObject.setCoords(); // recalculate coords after rotation\n        const rect = selectedObject.getBoundingRect();\n        const canvasWidth = canvas.getWidth();\n        const canvasHeight = canvas.getHeight();\n        let dx = 0,\n          dy = 0;\n        // Snap left/right\n        if (rect.left < 0) {\n          dx = -rect.left;\n        } else if (rect.left + rect.width > canvasWidth) {\n          dx = canvasWidth - (rect.left + rect.width);\n        }\n        // Snap top/bottom\n        if (rect.top < 0) {\n          dy = -rect.top;\n        } else if (rect.top + rect.height > canvasHeight) {\n          dy = canvasHeight - (rect.top + rect.height);\n        }\n        if (dx !== 0 || dy !== 0) {\n          // Move by offset, using current origin\n          const originX = selectedObject.originX || 'center';\n          const originY = selectedObject.originY || 'center';\n          // Calculate new center position\n          const newCenter = new fabric.Point(\n            (selectedObject.left ?? 0) + dx,\n            (selectedObject.top ?? 0) + dy\n          );\n          selectedObject.setPositionByOrigin(newCenter, originX, originY);\n          selectedObject.setCoords();\n        }\n      }\n\n      canvas.renderAll();\n\n      setProperties((prev) => ({\n        ...prev,\n        ...updatedProperties,\n      }));\n    });\n  };\n\n  return { updateObject };\n};\n","import { Pattern, Gradient } from 'fabric/fabric-impl';\n\n// :::::::::::::::::::: Converts number to float conditionally\nexport const toFloat = (num: any) => {\n  if (typeof num !== 'number' || isNaN(num)) return '';\n  return num % 1 !== 0 ? Number(num.toFixed(2)) : num;\n};\n\n// ::::::::::::::::::: Object Properties type\nexport interface PropertiesType {\n  angle?: number;\n  radius?: number;\n  width?: number;\n  height?: number;\n  fill?: string | Pattern | Gradient | undefined;\n  stroke?: string | Pattern | Gradient | undefined;\n  text?: string;\n  fontSize?: number;\n  fontWeight?: string;\n  fontFamily?: string;\n  left?: number;\n  top?: number;\n}\n","import { toFloat } from '@/utils';\n\ninterface Properties {\n  angle: number;\n  left: number;\n  top: number;\n  width?: number;\n  height?: number;\n  type?: string;\n}\n\ninterface CommonPropertiesProps {\n  properties: Properties;\n  updateObject: (updates: Partial<Properties>) => void;\n}\n\nconst angleOptions = [\n  { value: 45, label: '45' },\n  { value: 90, label: '90' },\n  { value: 180, label: '180' },\n  { value: 270, label: '270' },\n];\n\nconst CommonProperties: React.FC<CommonPropertiesProps> = ({\n  properties,\n  updateObject,\n}) => (\n  <div className=\"space-y-2\">\n    <div className=\"grid grid-cols-2 gap-2\">\n      <div>\n        <label className=\"mb-1 block text-xs font-medium text-gray-600\">\n          Position X\n        </label>\n        <div className=\"flex items-center gap-1\">\n          <button\n            className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n            onClick={() => {\n              if (typeof properties.left === 'number') {\n                updateObject({ left: properties.left - 1 });\n              }\n            }}\n            disabled={typeof properties.left !== 'number'}\n          >\n            -\n          </button>\n          <input\n            type=\"number\"\n            value={toFloat(properties.left)}\n            onChange={(e) => updateObject({ left: Number(e.target.value) })}\n            className=\"w-16 rounded border border-solid border-gray-200 bg-white px-1 py-0.5 text-center text-xs [appearance:textfield] focus:outline-none focus:ring-1 focus:ring-gray-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none\"\n          />\n          <button\n            className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n            onClick={() => {\n              if (typeof properties.left === 'number') {\n                updateObject({ left: properties.left + 1 });\n              }\n            }}\n            disabled={typeof properties.left !== 'number'}\n          >\n            +\n          </button>\n        </div>\n      </div>\n      <div>\n        <label className=\"mb-1 block text-xs font-medium text-gray-600\">\n          Position Y\n        </label>\n        <div className=\"flex items-center gap-1\">\n          <button\n            className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n            onClick={() => {\n              if (typeof properties.top === 'number') {\n                updateObject({ top: properties.top - 1 });\n              }\n            }}\n            disabled={typeof properties.top !== 'number'}\n          >\n            -\n          </button>\n          <input\n            type=\"number\"\n            value={toFloat(properties.top)}\n            onChange={(e) => updateObject({ top: Number(e.target.value) })}\n            className=\"w-16 rounded border border-solid border-gray-200 bg-white px-1 py-0.5 text-center text-xs [appearance:textfield] focus:outline-none focus:ring-1 focus:ring-gray-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none\"\n          />\n          <button\n            className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n            onClick={() => {\n              if (typeof properties.top === 'number') {\n                updateObject({ top: properties.top + 1 });\n              }\n            }}\n            disabled={typeof properties.top !== 'number'}\n          >\n            +\n          </button>\n        </div>\n      </div>\n      {properties.type !== 'circle' && (\n        <>\n          <div>\n            <label className=\"mb-1 block text-xs font-medium text-gray-600\">\n              Width\n            </label>\n            <div className=\"flex items-center gap-1\">\n              <button\n                className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n                onClick={() => {\n                  if (typeof properties.width === 'number') {\n                    updateObject({ width: properties.width - 1 });\n                  }\n                }}\n                disabled={typeof properties.width !== 'number'}\n              >\n                -\n              </button>\n              <input\n                type=\"number\"\n                value={toFloat(properties.width ?? 0)}\n                onChange={(e) =>\n                  updateObject({ width: Number(e.target.value) })\n                }\n                className=\"w-16 rounded border border-solid border-gray-200 bg-white px-1 py-0.5 text-center text-xs [appearance:textfield] focus:outline-none focus:ring-1 focus:ring-gray-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none\"\n              />\n              <button\n                className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n                onClick={() => {\n                  if (typeof properties.width === 'number') {\n                    updateObject({ width: properties.width + 1 });\n                  }\n                }}\n                disabled={typeof properties.width !== 'number'}\n              >\n                +\n              </button>\n            </div>\n          </div>\n          <div>\n            <label className=\"mb-1 block text-xs font-medium text-gray-600\">\n              Height\n            </label>\n            <div className=\"flex items-center gap-1\">\n              <button\n                className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n                onClick={() => {\n                  if (typeof properties.height === 'number') {\n                    updateObject({ height: properties.height - 1 });\n                  }\n                }}\n                disabled={typeof properties.height !== 'number'}\n              >\n                -\n              </button>\n              <input\n                type=\"number\"\n                value={toFloat(properties.height ?? 0)}\n                onChange={(e) =>\n                  updateObject({ height: Number(e.target.value) })\n                }\n                className=\"w-16 rounded border border-solid border-gray-200 bg-white px-1 py-0.5 text-center text-xs [appearance:textfield] focus:outline-none focus:ring-1 focus:ring-gray-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none\"\n              />\n              <button\n                className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n                onClick={() => {\n                  if (typeof properties.height === 'number') {\n                    updateObject({ height: properties.height + 1 });\n                  }\n                }}\n                disabled={typeof properties.height !== 'number'}\n              >\n                +\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n    <div>\n      <label className=\"mb-1 block text-xs font-medium text-gray-600\">\n        Angle\n      </label>\n      <div className=\"flex items-center gap-1\">\n        <button\n          className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n          onClick={() => {\n            if (typeof properties.angle === 'number') {\n              updateObject({ angle: properties.angle - 1 });\n            }\n          }}\n          disabled={typeof properties.angle !== 'number'}\n        >\n          -\n        </button>\n        <input\n          type=\"number\"\n          value={toFloat(properties.angle)}\n          onChange={(e) => updateObject({ angle: Number(e.target.value) })}\n          className=\"w-16 rounded border border-solid border-gray-200 bg-white px-1 py-0.5 text-center text-xs [appearance:textfield] focus:outline-none focus:ring-1 focus:ring-gray-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none\"\n        />\n        <button\n          className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n          onClick={() => {\n            if (typeof properties.angle === 'number') {\n              updateObject({ angle: properties.angle + 1 });\n            }\n          }}\n          disabled={typeof properties.angle !== 'number'}\n        >\n          +\n        </button>\n        <div className=\"ml-1 flex items-center gap-1\">\n          {angleOptions.map(({ value, label }) => (\n            <button\n              key={value}\n              className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n              onClick={() => updateObject({ angle: value })}\n              title={label}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"12\"\n                height=\"12\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                style={{ transform: `rotate(${value + 90}deg)` }}\n              >\n                <path d=\"M12 2v20M2 12h20\" />\n                <path d=\"M2 12l4-4M2 12l4 4\" />\n              </svg>\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nexport default CommonProperties;\n","import { toFloat, PropertiesType } from '@/utils';\n// import { toFloat } from '../utils';\nimport React from 'react';\nimport { Properties as SidebarProperties } from '../../hooks';\n\ninterface Properties {\n  radius: number | 'mixed';\n  seatNumber?: string | 'mixed';\n  category?: string | 'mixed';\n  price?: number | 'mixed';\n  status?: 'available' | 'reserved' | 'sold' | 'mixed';\n}\n\ninterface CirclePropertiesProps {\n  properties: Properties;\n  updateObject: (updates: Partial<SidebarProperties>) => void;\n  Select: React.FC<{\n    options: { value: string; label: string }[];\n    value: string;\n    onChange: (value: string) => void;\n  }>;\n}\n\nconst statusOptions = [\n  { value: 'available', label: 'Available' },\n  { value: 'reserved', label: 'Reserved' },\n  { value: 'sold', label: 'Sold' },\n];\n\nconst categoryOptions = [\n  { value: 'standard', label: 'Standard' },\n  { value: 'vip', label: 'VIP' },\n  { value: 'premium', label: 'Premium' },\n];\n\nconst SeatAttributes: React.FC<CirclePropertiesProps> = ({\n  properties,\n  updateObject,\n  Select,\n}) => (\n  <div className=\"space-y-4\">\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">\n        Seat Number\n      </label>\n      <input\n        type=\"text\"\n        value={properties.seatNumber || ''}\n        onChange={(e) => updateObject({ seatNumber: e.target.value })}\n        className=\"mt-1 w-full rounded-md border px-2 py-1\"\n      />\n    </div>\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">\n        Category\n      </label>\n      <Select\n        options={categoryOptions}\n        value={properties.category || 'standard'}\n        onChange={(value) => updateObject({ category: value })}\n      />\n    </div>\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">Price</label>\n      <input\n        type=\"number\"\n        value={properties.price || 0}\n        onChange={(e) => updateObject({ price: Number(e.target.value) })}\n        className=\"mt-1 w-full rounded-md border px-2 py-1\"\n      />\n    </div>\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">Status</label>\n      <Select\n        options={statusOptions}\n        value={properties.status || 'available'}\n        onChange={(value) =>\n          updateObject({ status: value as Properties['status'] })\n        }\n      />\n    </div>\n  </div>\n);\n\nconst CircleProperties: React.FC<CirclePropertiesProps> = ({\n  properties,\n  updateObject,\n  Select,\n}) => {\n  const [activeTab, setActiveTab] = React.useState<'basic' | 'attributes'>(\n    'basic'\n  );\n\n  return (\n    <div className=\"space-y-4\">\n      <label className=\"block text-sm font-medium text-gray-700\">Radius</label>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-1\">\n          <button\n            className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n            onClick={() => {\n              if (typeof properties.radius === 'number') {\n                updateObject({ radius: properties.radius - 1 });\n              }\n            }}\n            disabled={properties.radius === 'mixed'}\n          >\n            -\n          </button>\n          <input\n            type=\"number\"\n            value={\n              properties.radius === 'mixed' ? '' : toFloat(properties.radius)\n            }\n            placeholder={properties.radius === 'mixed' ? '' : ''}\n            onChange={(e) => updateObject({ radius: Number(e.target.value) })}\n            className=\"w-12 rounded border border-solid border-gray-200 bg-white px-1 py-0.5 text-center text-xs [appearance:textfield] focus:outline-none focus:ring-1 focus:ring-gray-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none\"\n          />\n          <button\n            className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n            onClick={() => {\n              if (typeof properties.radius === 'number') {\n                updateObject({ radius: properties.radius + 1 });\n              }\n            }}\n            disabled={properties.radius === 'mixed'}\n          >\n            +\n          </button>\n        </div>\n        <div className=\"mb-1 flex items-center gap-1\">\n          <button\n            className={`flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 ${\n              properties.radius === 0 ? 'bg-gray-200' : 'bg-white'\n            } transition-colors`}\n            onClick={() => updateObject({ radius: 0 })}\n            title=\"None\"\n          >\n            <svg\n              width=\"14\"\n              height=\"14\"\n              viewBox=\"0 0 14 14\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <rect x=\"2\" y=\"2\" width=\"10\" height=\"10\" rx=\"0\" />\n            </svg>\n          </button>\n          <button\n            className={`flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 ${\n              properties.radius === 4 ? 'bg-gray-200' : 'bg-white'\n            } text-xs transition-colors`}\n            onClick={() => updateObject({ radius: 4 })}\n            title=\"Small\"\n          >\n            sm\n          </button>\n          <button\n            className={`flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 ${\n              properties.radius === 10 ? 'bg-gray-200' : 'bg-white'\n            } text-xs transition-colors`}\n            onClick={() => updateObject({ radius: 10 })}\n            title=\"Medium\"\n          >\n            md\n          </button>\n          <button\n            className={`flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 ${\n              properties.radius === 20 ? 'bg-gray-200' : 'bg-white'\n            } text-xs transition-colors`}\n            onClick={() => updateObject({ radius: 20 })}\n            title=\"Large\"\n          >\n            lg\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CircleProperties;\n","import { toFloat, PropertiesType } from '@/utils';\n// import { toFloat } from '../utils';\nimport { Pattern, Gradient } from 'fabric/fabric-impl';\nimport { useState, useEffect } from 'react';\nimport { useEventGuiStore } from '@/zustand';\n\ninterface Properties {\n  width: number;\n  height: number;\n  fill?: string | Pattern | Gradient;\n  stroke?: string | Pattern | Gradient;\n  strokeWidth?: number;\n  rx?: number;\n  ry?: number;\n}\n\ninterface RectanglePropertiesProps {\n  properties: Properties;\n  updateObject: (updates: Partial<Properties>) => void;\n  Select: React.FC<{\n    options: { value: string; label: string }[];\n    value: string;\n    onChange: (value: string) => void;\n  }>;\n}\n\nconst strokeWidthOptions = [\n  { value: '0', label: 'None' },\n  { value: '1', label: 'Thin' },\n  { value: '2', label: 'Medium' },\n  { value: '3', label: 'Thick' },\n  { value: '4', label: 'Extra Thick' },\n];\n\nconst RectangleProperties: React.FC<RectanglePropertiesProps> = ({\n  properties,\n  updateObject,\n  Select,\n}) => {\n  const [lockAspect, setLockAspect] = useState(true);\n  const { canvas } = useEventGuiStore();\n\n  useEffect(() => {\n    if (!canvas) return;\n    const activeObject = canvas.getActiveObject && canvas.getActiveObject();\n    if (activeObject && activeObject.type === 'rect') {\n      activeObject.set('lockUniScaling', lockAspect);\n      activeObject.setControlsVisibility({\n        mt: !lockAspect,\n        mb: !lockAspect,\n        ml: !lockAspect,\n        mr: !lockAspect,\n      });\n      canvas.renderAll && canvas.renderAll();\n    }\n  }, [lockAspect, canvas]);\n\n  return (\n    <>\n      <div className=\"mt-2 flex items-center\">\n        <input\n          type=\"checkbox\"\n          checked={lockAspect}\n          onChange={(e) => setLockAspect(e.target.checked)}\n          className=\"mr-2\"\n        />\n        <span className=\"text-xs text-gray-600\">Lock aspect ratio</span>\n      </div>\n      <div>\n        <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n          Stroke Width\n        </label>\n        <Select\n          options={strokeWidthOptions}\n          value={properties.strokeWidth?.toString() || '1'}\n          onChange={(value) => updateObject({ strokeWidth: Number(value) })}\n        />\n      </div>\n      <div className=\"mt-2\">\n        <label className=\"mb-1 block text-sm font-medium text-gray-700\">\n          Border Radius\n        </label>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-1\">\n            <button\n              className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n              onClick={() =>\n                updateObject({\n                  rx: Number(toFloat((properties as any).rx ?? 0)) - 1,\n                  ry: Number(toFloat((properties as any).ry ?? 0)) - 1,\n                })\n              }\n            >\n              -\n            </button>\n            <input\n              type=\"number\"\n              value={toFloat((properties as any).rx ?? 0)}\n              onChange={(e) =>\n                updateObject({\n                  rx: Number(e.target.value),\n                  ry: Number(e.target.value),\n                })\n              }\n              className=\"w-12 rounded border border-solid border-gray-200 bg-white px-1 py-0.5 text-center text-xs [appearance:textfield] focus:outline-none focus:ring-1 focus:ring-gray-500 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none\"\n            />\n            <button\n              className=\"flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 text-xs transition-colors hover:bg-gray-100\"\n              onClick={() =>\n                updateObject({\n                  rx: Number(toFloat((properties as any).rx ?? 0)) + 1,\n                  ry: Number(toFloat((properties as any).ry ?? 0)) + 1,\n                })\n              }\n            >\n              +\n            </button>\n          </div>\n          <div className=\"mb-1 flex items-center gap-1\">\n            <button\n              className={`flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 ${\n                ((properties as any).rx ?? 0) === 0 ? 'bg-gray-200' : 'bg-white'\n              } transition-colors`}\n              onClick={() => updateObject({ rx: 0, ry: 0 })}\n              title=\"None\"\n            >\n              <svg\n                width=\"14\"\n                height=\"14\"\n                viewBox=\"0 0 14 14\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n              >\n                <rect x=\"2\" y=\"2\" width=\"10\" height=\"10\" rx=\"0\" />\n              </svg>\n            </button>\n            <button\n              className={`flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 ${\n                ((properties as any).rx ?? 0) === 4 ? 'bg-gray-200' : 'bg-white'\n              } text-xs transition-colors`}\n              onClick={() => updateObject({ rx: 4, ry: 4 })}\n              title=\"Small\"\n            >\n              sm\n            </button>\n            <button\n              className={`flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 ${\n                ((properties as any).rx ?? 0) === 10\n                  ? 'bg-gray-200'\n                  : 'bg-white'\n              } text-xs transition-colors`}\n              onClick={() => updateObject({ rx: 10, ry: 10 })}\n              title=\"Medium\"\n            >\n              md\n            </button>\n            <button\n              className={`flex h-6 w-6 items-center justify-center rounded border border-solid border-gray-200 ${\n                ((properties as any).rx ?? 0) === 20\n                  ? 'bg-gray-200'\n                  : 'bg-white'\n              } text-xs transition-colors`}\n              onClick={() => updateObject({ rx: 20, ry: 20 })}\n              title=\"Large\"\n            >\n              lg\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default RectangleProperties;\n","import { toFloat, PropertiesType } from '@/utils';\n// import { toFloat } from '../utils';\n\ninterface Properties {\n  text: string;\n  fontSize: number;\n  fontWeight: string;\n  fontFamily: string;\n  strokeWidth?: number;\n}\n\ninterface TextPropertiesProps {\n  properties: Properties;\n  updateObject: (updates: Partial<Properties>) => void;\n  Select: React.ComponentType<{\n    options: Array<{ value: string; label: string }>;\n    value: string;\n    onChange: (value: string) => void;\n  }>;\n}\n\nconst fontWeightOptions = [\n  { value: '100', label: 'Thin' },\n  { value: '200', label: 'Extra Light' },\n  { value: '300', label: 'Light' },\n  { value: '400', label: 'Regular' },\n  { value: '500', label: 'Medium' },\n  { value: '600', label: 'Semi Bold' },\n  { value: '700', label: 'Bold' },\n  { value: '800', label: 'Extra Bold' },\n  { value: '900', label: 'Black' },\n];\n\nconst fontFamilyOptions = [\n  { value: 'sans-serif', label: 'Sans-serif' },\n  { value: 'serif', label: 'Serif' },\n  { value: 'monospace', label: 'Monospace' },\n  { value: 'poppins', label: 'Poppins' },\n];\n\nconst strokeWidthOptions = [\n  { value: 0, label: 'None' },\n  { value: 1, label: 'Thin' },\n  { value: 2, label: 'Medium' },\n  { value: 3, label: 'Thick' },\n  { value: 4, label: 'Extra Thick' },\n];\n\nconst TextProperties: React.FC<TextPropertiesProps> = ({\n  properties,\n  updateObject,\n  Select,\n}) => (\n  <>\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">Text</label>\n      <input\n        type=\"text\"\n        value={properties.text}\n        onChange={(e) => updateObject({ text: e.target.value })}\n        className=\"mt-1 w-full rounded-md border px-2 py-1\"\n      />\n    </div>\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">\n        Font Size\n      </label>\n      <div className=\"mt-1 flex items-center\">\n        <button\n          className=\"rounded-l-md bg-gray-200 px-2 py-1\"\n          onClick={() =>\n            updateObject({ fontSize: toFloat(properties.fontSize) - 1 })\n          }\n        >\n          -\n        </button>\n        <input\n          type=\"number\"\n          value={toFloat(properties.fontSize)}\n          onChange={(e) => updateObject({ fontSize: Number(e.target.value) })}\n          className=\"w-full border-b border-t px-2 py-1 text-center shadow-sm\"\n        />\n        <button\n          className=\"rounded-r-md bg-gray-200 px-2 py-1\"\n          onClick={() =>\n            updateObject({ fontSize: toFloat(properties.fontSize) + 1 })\n          }\n        >\n          +\n        </button>\n      </div>\n    </div>\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">\n        Font Weight\n      </label>\n      <Select\n        options={fontWeightOptions}\n        value={properties.fontWeight}\n        onChange={(value) => updateObject({ fontWeight: value })}\n      />\n    </div>\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">\n        Font Family\n      </label>\n      <Select\n        options={fontFamilyOptions}\n        value={properties.fontFamily}\n        onChange={(value) => updateObject({ fontFamily: value })}\n      />\n    </div>\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700\">\n        Stroke Width\n      </label>\n      <Select\n        options={strokeWidthOptions.map((option) => ({\n          value: option.value.toString(),\n          label: option.label,\n        }))}\n        value={properties.strokeWidth?.toString() || '0'}\n        onChange={(value) => updateObject({ strokeWidth: Number(value) })}\n      />\n    </div>\n  </>\n);\n\nexport default TextProperties;\n","import { Properties } from '../../hooks';\nimport { useState, useEffect } from 'react';\n\ninterface ColorPropertiesProps {\n  properties: Properties;\n  updateObject: (updates: Partial<Properties>) => void;\n  objectType: string | null;\n}\n\nconst ColorProperties: React.FC<ColorPropertiesProps> = ({\n  properties,\n  updateObject,\n  objectType,\n}) => {\n  const [syncColors, setSyncColors] = useState(false);\n\n  useEffect(() => {\n    // Check if stroke matches fill initially\n    setSyncColors(properties.stroke === properties.fill);\n  }, [properties.stroke, properties.fill]);\n\n  const handleFillChange = (value: string) => {\n    updateObject({ fill: value });\n    if (syncColors) {\n      updateObject({ stroke: value });\n    }\n  };\n\n  return (\n    <>\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700\">\n          Fill Color\n        </label>\n        <div className=\"mt-1 flex items-center\">\n          <input\n            type=\"color\"\n            value={\n              typeof properties.fill === 'string' &&\n              /^#([0-9A-Fa-f]{6})$/.test(properties.fill)\n                ? properties.fill\n                : '#ffffff'\n            }\n            onChange={(e) => handleFillChange(e.target.value)}\n            className=\"h-8 w-8 bg-transparent rounded-md\"\n          />\n          <input\n            type=\"text\"\n            value={(properties.fill?.toString() || '').toUpperCase()}\n            onChange={(e) => handleFillChange(e.target.value)}\n            className=\"ml-2 w-full rounded-md text-sm border border-solid border-gray-200 px-2 py-1 shadow-sm\"\n          />\n        </div>\n      </div>\n\n      <div>\n        <div className=\"flex items-center justify-between\">\n          <label className=\"block text-sm font-medium text-gray-700\">\n            Stroke Color\n          </label>\n          <label className=\"flex items-center space-x-1 text-xs text-gray-600\">\n            <input\n              type=\"checkbox\"\n              checked={syncColors}\n              onChange={(e) => {\n                setSyncColors(e.target.checked);\n                if (e.target.checked) {\n                  updateObject({ stroke: properties.fill });\n                }\n              }}\n              className=\"h-3 w-3 rounded border-gray-300\"\n            />\n            <span>Sync with fill</span>\n          </label>\n        </div>\n        <div className=\"mt-1 flex items-center\">\n          <input\n            type=\"color\"\n            value={\n              properties?.stroke === 'transparent'\n                ? '#ffffff'\n                : properties.stroke?.toString() || '#000000'\n            }\n            onChange={(e) => updateObject({ stroke: e.target.value })}\n            disabled={syncColors}\n            className={`h-8 w-8 rounded-md bg-transparent ${syncColors ? 'opacity-50' : ''}`}\n          />\n          <input\n            type=\"text\"\n            value={\n              properties.stroke === 'transparent'\n                ? 'transparent'\n                : (properties.stroke?.toString() || '').toUpperCase()\n            }\n            onChange={(e) => updateObject({ stroke: e.target.value })}\n            disabled={syncColors}\n            className={`ml-2 w-full text-sm rounded-md border border-solid border-gray-200 px-2 py-1 shadow-sm ${\n              syncColors ? 'opacity-50' : ''\n            }`}\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ColorProperties;\n","import React, { useState } from 'react';\nimport { Properties } from '../../hooks';\nimport { useEventGuiStore } from '@/zustand';\n\ninterface SeatAttributesProps {\n  properties: Properties;\n  updateObject: (updates: Partial<Properties>) => void;\n  Select: React.FC<{\n    options: { value: string; label: string }[];\n    value: string;\n    onChange: (value: string) => void;\n  }>;\n  selectedObjects?: any[];\n}\n\nconst statusOptions = [\n  { value: 'available', label: 'Available' },\n  { value: 'reserved', label: 'Reserved' },\n  { value: 'sold', label: 'Sold' },\n];\n\nconst categoryOptions = [\n  { value: 'standard', label: 'Standard' },\n  { value: 'vip', label: 'VIP' },\n  { value: 'premium', label: 'Premium' },\n];\n\nconst SeatAttributes: React.FC<SeatAttributesProps> = ({\n  properties,\n  updateObject,\n  Select,\n}) => {\n  const { canvas } = useEventGuiStore();\n  const [error, setError] = useState('');\n\n  // Helper to check if a seat number is unique\n  function isSeatNumberUnique(num: string) {\n    if (!canvas || !num) return true;\n    const allSeats = canvas.getObjects('circle');\n    return !allSeats.some(\n      (obj: any) => obj.seatNumber === num && obj !== canvas.getActiveObject()\n    );\n  }\n\n  function handleSeatNumberChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const value = e.target.value;\n    if (value && !isSeatNumberUnique(value)) {\n      setError('Seat number already used');\n    } else {\n      setError('');\n      updateObject({ seatNumber: value });\n    }\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700\">\n          Seat Number\n        </label>\n        <input\n          type=\"text\"\n          value={\n            properties.seatNumber === 'mixed' ? '' : properties.seatNumber || ''\n          }\n          placeholder={properties.seatNumber === 'mixed' ? '' : ''}\n          onChange={handleSeatNumberChange}\n          className=\"mt-1 w-full rounded-md border border-solid border-gray-300 px-2 py-1\"\n        />\n        {error && <div className=\"mt-1 text-xs text-red-500\">{error}</div>}\n      </div>\n      <div>\n        <label className=\"mb-2 block text-sm font-medium text-gray-700\">\n          Category\n        </label>\n        <Select\n          options={categoryOptions}\n          value={\n            properties.category === 'mixed'\n              ? ''\n              : properties.category || 'standard'\n          }\n          onChange={(value) => updateObject({ category: value })}\n        />\n      </div>\n      <div>\n        <label className=\"mb-2 block text-sm font-medium text-gray-700\">\n          Price\n        </label>\n        <input\n          type=\"number\"\n          value={properties.price === 'mixed' ? '' : properties.price || 0}\n          placeholder={properties.price === 'mixed' ? '' : ''}\n          onChange={(e) => updateObject({ price: Number(e.target.value) })}\n          className=\"mt-1 w-full rounded-md border border-solid border-gray-300 px-2 py-1\"\n        />\n      </div>\n      <div>\n        <label className=\"mb-2 block text-sm font-medium text-gray-700\">\n          Status\n        </label>\n        <Select\n          options={statusOptions}\n          value={\n            properties.status === 'mixed'\n              ? ''\n              : properties.status || 'available'\n          }\n          onChange={(value) =>\n            updateObject({ status: value as Properties['status'] })\n          }\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default SeatAttributes;\n","import { useEffect, useState } from 'react';\nimport { LuPlus } from 'react-icons/lu';\nimport { useEventGuiStore } from '@/zustand';\nimport { CustomFabricObject } from '@/types/fabric-types';\nimport { Select } from '@/components/ui';\nimport { useObjectProperties, useObjectUpdater } from './hooks';\nimport CommonProperties from './components/commonProperties';\nimport CircleProperties from './components/circleProperties';\nimport RectangleProperties from './components/rectangleProperties';\nimport TextProperties from './components/textProperties';\nimport ColorProperties from './components/colorProperties';\nimport { Pattern, Gradient } from 'fabric/fabric-impl';\nimport SeatAttributes from './components/seatAttributes';\n\nexport type Mode =\n  | 'select'\n  | 'one-seat'\n  | 'multiple-seat'\n  | 'shape-square'\n  | 'text';\n\nconst Sidebar: React.FC = () => {\n  const { canvas } = useEventGuiStore();\n  const [selectedObjects, setSelectedObjects] = useState<CustomFabricObject[]>(\n    []\n  );\n  const [objectTypes, setObjectTypes] = useState<string[]>([]);\n  const [selectedObject, setSelectedObject] =\n    useState<CustomFabricObject | null>(null);\n  const [objectType, setObjectType] = useState<\n    'circle' | 'rect' | 'i-text' | null\n  >(null);\n  const [activeTab, setActiveTab] = useState<'basic' | 'attributes'>('basic');\n\n  const { properties, setProperties } = useObjectProperties(\n    canvas,\n    selectedObjects\n  );\n  const [lockAspect, setLockAspect] = useState(true);\n  const { updateObject } = useObjectUpdater(canvas, setProperties, lockAspect);\n\n  // ::::::::::::::::::::::: Listen for object selection\n  useEffect(() => {\n    if (!canvas) return;\n\n    const updateSelectedObjects = () => {\n      const activeObjects = canvas.getActiveObjects() as CustomFabricObject[];\n      setSelectedObjects(activeObjects);\n      setSelectedObject(activeObjects[0] || null);\n      setObjectType(\n        activeObjects[0]?.type as 'circle' | 'rect' | 'i-text' | null\n      );\n      setObjectTypes(\n        Array.from(\n          new Set(\n            activeObjects\n              .map((obj) => obj.type)\n              .filter((type): type is string => typeof type === 'string')\n          )\n        )\n      );\n      // --- Sync sidebar properties with first active object ---\n      if (activeObjects[0]) {\n        setProperties((prev) => ({\n          ...prev,\n          angle: activeObjects[0].angle ?? prev.angle,\n          radius: (activeObjects[0] as any).radius ?? prev.radius,\n          width:\n            (activeObjects[0].width ?? prev.width) *\n            (activeObjects[0].scaleX ?? 1),\n          height:\n            (activeObjects[0].height ?? prev.height) *\n            (activeObjects[0].scaleY ?? 1),\n          fill: activeObjects[0].fill ?? prev.fill,\n          stroke: activeObjects[0].stroke ?? prev.stroke,\n          text: (activeObjects[0] as any).text ?? prev.text,\n          fontSize: (activeObjects[0] as any).fontSize ?? prev.fontSize,\n          fontWeight: (activeObjects[0] as any).fontWeight ?? prev.fontWeight,\n          fontFamily: (activeObjects[0] as any).fontFamily ?? prev.fontFamily,\n          left: activeObjects[0].left ?? prev.left,\n          top: activeObjects[0].top ?? prev.top,\n          rx: (activeObjects[0] as any).rx ?? prev.rx,\n          ry: (activeObjects[0] as any).ry ?? prev.ry,\n        }));\n      }\n    };\n\n    const eventsToListen = [\n      'selection:created',\n      'selection:updated',\n      'object:moving',\n      'object:rotating',\n      'object:scaling',\n      'object:modified',\n    ];\n\n    eventsToListen.forEach((event) => {\n      canvas.on(event, updateSelectedObjects);\n    });\n\n    canvas.on('selection:cleared', () => {\n      setSelectedObjects([]);\n      setSelectedObject(null);\n      setObjectType(null);\n      setObjectTypes([]);\n    });\n\n    return () => {\n      eventsToListen.forEach((event) => {\n        canvas.off(event, updateSelectedObjects);\n      });\n      canvas.off('selection:cleared');\n    };\n  }, [canvas]);\n\n  return (\n    <div className=\"min-h-screen w-[20rem] space-y-4 bg-gray-50 p-4\">\n      <div className=\"rounded-md bg-white shadow\">\n        <div className=\"flex items-center justify-between rounded-t-md bg-gray-200 p-2\">\n          <span className=\"font-semibold\">Zones</span>\n          <button className=\"text-gray-600 hover:text-gray-800\">\n            <LuPlus size={20} />\n          </button>\n        </div>\n        <div className=\"flex items-center space-x-2 p-2\">\n          <input\n            type=\"checkbox\"\n            id=\"ground-floor\"\n            className=\"rounded text-gray-600\"\n          />\n          <label htmlFor=\"ground-floor\">Ground floor</label>\n        </div>\n      </div>\n\n      {selectedObjects.length > 1 &&\n        objectTypes.length === 1 &&\n        objectTypes[0] === 'circle' && (\n          <div className=\"mb-2 text-xs font-semibold text-gray-500\">\n            Editing {selectedObjects.length} seats\n          </div>\n        )}\n\n      {selectedObject && (\n        <div className=\"space-y-4 rounded-md bg-white p-4 shadow\">\n          {objectType === 'circle' && (\n            <div className=\"mb-4 flex items-center gap-2 border-0 border-b border-solid border-gray-200\">\n              <button\n                className={`px-3 py-1.5 text-sm font-medium ${\n                  activeTab === 'basic'\n                    ? 'border-0 border-b-2 border-solid border-gray-500 text-gray-600'\n                    : 'text-gray-500 hover:text-gray-700'\n                }`}\n                onClick={() => setActiveTab('basic')}\n              >\n                Properties\n              </button>\n              <button\n                className={`px-3 py-1.5 text-sm font-medium ${\n                  activeTab === 'attributes'\n                    ? 'border-0 border-b-2 border-solid border-gray-500 text-gray-600'\n                    : 'text-gray-500 hover:text-gray-700'\n                }`}\n                onClick={() => setActiveTab('attributes')}\n              >\n                Attributes\n              </button>\n            </div>\n          )}\n\n          {objectTypes.length === 1 &&\n          objectTypes[0] === 'circle' &&\n          activeTab === 'attributes' ? (\n            <SeatAttributes\n              properties={properties}\n              updateObject={updateObject}\n              Select={Select}\n              selectedObjects={selectedObjects}\n            />\n          ) : (\n            <>\n              {objectType !== 'circle' && (\n                <h3 className=\"font-semibold\">Properties</h3>\n              )}\n              <CommonProperties\n                properties={{ ...properties, type: objectType || undefined }}\n                updateObject={updateObject}\n              />\n\n              {objectType === 'circle' && (\n                <CircleProperties\n                  properties={properties}\n                  updateObject={updateObject}\n                  Select={Select}\n                />\n              )}\n\n              {objectType === 'rect' && (\n                <RectangleProperties\n                  properties={properties}\n                  updateObject={updateObject}\n                  Select={Select}\n                />\n              )}\n\n              {objectType === 'i-text' && (\n                <TextProperties\n                  properties={properties}\n                  updateObject={updateObject}\n                  Select={Select}\n                />\n              )}\n\n              <ColorProperties\n                properties={properties}\n                updateObject={updateObject}\n                objectType={objectType}\n              />\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Sidebar;\n","import { fabric } from 'fabric';\nimport { v4 as uuidv4 } from 'uuid';\n\n// ::::::::::::::: Create rectangle object\nconst createRect = (left: number, top: number) => {\n  const rect = new fabric.Rect({\n    left,\n    top,\n    fill: '#cccccc',\n    stroke: 'black',\n    strokeWidth: 1,\n    width: 100,\n    height: 100,\n    selectable: true,\n    borderColor: 'green',\n    borderDashArray: [2, 4],\n    padding: 2,\n    cornerColor: 'lightblue',\n    cornerSize: 5,\n    cornerStrokeColor: 'blue',\n    transparentCorners: false,\n    id: uuidv4(),\n    strokeUniform: true,\n    rx: 0,\n    ry: 0,\n  });\n\n  rect.setControlsVisibility({\n    mt: false,\n    mb: false,\n    ml: false,\n    mr: false,\n  });\n  \n  return rect;    \n};\n\n// ::::::::::::::: Create seat object\nconst createSeat = (\n  left: number,\n  top: number,\n  canvas?: fabric.Canvas | null\n) => {\n  const seatNumber = getNextSeatNumber(canvas);\n  const seat = new fabric.Circle({\n    left,\n    top,\n    fill: 'transparent',\n    stroke: 'black',\n    strokeWidth: 1,\n    radius: 10,\n    selectable: true,\n    borderColor: 'green',\n    borderDashArray: [2, 4],\n    padding: 2,\n    cornerColor: 'lightblue',\n    cornerSize: 5,\n    cornerStrokeColor: 'blue',\n    transparentCorners: false,\n    rx: 0.25,\n    ry: 0.25,\n    id: uuidv4(),\n    strokeUniform: true,\n    seatNumber: String(seatNumber),\n  });\n\n  seat.setControlsVisibility({\n    mt: false,\n    mb: false,\n    ml: false,\n    mr: false,\n  });\n  \n  return seat;    \n};\n\n// ::::::::::::::: Create text object\nconst createText = (left: number, top: number, text: string = 'Type here') => {\n  const textObject = new fabric.IText(text, {\n    left,\n    top,\n    fontSize: 20,\n    fill: 'black',\n    selectable: true,\n    borderColor: 'green',\n    borderDashArray: [2, 4],\n    padding: 2,\n    cornerColor: 'lightblue',\n    cornerSize: 5,\n    cornerStrokeColor: 'blue',\n    transparentCorners: false,\n    fontFamily: 'sans-serif',\n    id: uuidv4(),\n    strokeUniform: true,\n  });\n\n  textObject.setControlsVisibility({\n    mt: false,\n    mb: false,\n    ml: false,\n    mr: false,\n  });\n  \n  return textObject;\n};\n\n// Helper to get the next available seat number from the canvas\nfunction getNextSeatNumber(canvas?: fabric.Canvas | null) {\n  if (!canvas) return 1;\n  const allSeats = canvas.getObjects('circle');\n  const numbers = allSeats\n    .map((obj) => parseInt((obj as any).seatNumber || '', 10))\n    .filter((n) => !isNaN(n));\n  return numbers.length ? Math.max(...numbers) + 1 : 1;\n}\n\nexport {\n  createRect,\n  createSeat,\n  createText,\n};\n","// import '../fabricCustomRegistration';\nimport { useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport { createSeat } from '../components/createObject';\n\nconst useCanvasSetup = (\n  canvasRef: React.RefObject<HTMLCanvasElement>,\n  canvasParent: React.RefObject<HTMLDivElement>,\n  setCanvas: (canvas: fabric.Canvas) => void\n) => {\n  useEffect(() => {\n    if (!canvasRef.current || !canvasParent.current) return;\n\n    const newCanvas = new fabric.Canvas(canvasRef.current);\n    setCanvas(newCanvas);\n\n    const resizeCanvas = () => {\n      if (canvasParent.current) {\n        const parent = canvasParent.current;\n        if (parent) {\n          const { width, height } = parent.getBoundingClientRect();\n          newCanvas.setDimensions({ width, height }, { cssOnly: false });\n        }\n      }\n    };\n\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n\n    const seat = createSeat(100, 100);\n    seat.angle = 45;\n    // newCanvas.add(seat);\n\n    newCanvas.on('object:moving', (event) => {\n      const obj = event.target;\n      const { width: canvasWidth, height: canvasHeight } = newCanvas;\n\n      if (obj) {\n        obj.setCoords(); // Ensure bounding box is up to date\n        const rect = obj.getBoundingRect();\n        let dx = 0,\n          dy = 0;\n        // Clamp left/right\n        if (rect.left < 0) {\n          dx = -rect.left;\n        } else if (rect.left + rect.width > (canvasWidth ?? 0)) {\n          dx = (canvasWidth ?? 0) - (rect.left + rect.width);\n        }\n        // Clamp top/bottom\n        if (rect.top < 0) {\n          dy = -rect.top;\n        } else if (rect.top + rect.height > (canvasHeight ?? 0)) {\n          dy = (canvasHeight ?? 0) - (rect.top + rect.height);\n        }\n        if (dx !== 0 || dy !== 0) {\n          obj.left = (obj.left ?? 0) + dx;\n          obj.top = (obj.top ?? 0) + dy;\n          obj.setCoords();\n        }\n      }\n    });\n\n    // Enforce strokeUniform: true for all supported objects on selection\n    newCanvas.on('selection:created', (event) => {\n      const objs = event.selected || (event.target ? [event.target] : []);\n      objs.forEach((obj) => {\n        if (\n          typeof obj.type === 'string' &&\n          ['rect', 'circle', 'i-text'].includes(obj.type)\n        ) {\n          obj.strokeUniform = true;\n        }\n      });\n    });\n    // Also enforce after loading from JSON (if needed)\n    newCanvas.on('after:render', () => {\n      newCanvas.getObjects().forEach((obj) => {\n        if (\n          typeof obj.type === 'string' &&\n          ['rect', 'circle', 'i-text'].includes(obj.type)\n        ) {\n          obj.strokeUniform = true;\n        }\n      });\n    });\n\n    return () => {\n      window.removeEventListener('resize', resizeCanvas);\n      newCanvas.dispose();\n    };\n  }, [canvasRef, canvasParent, setCanvas]);\n};\n\nexport default useCanvasSetup;\n","import { useEffect } from 'react';\nimport { fabric } from 'fabric';\n\nconst useSelectionHandler = (canvas: fabric.Canvas | null) => {\n  useEffect(() => {\n    if (!canvas) return;\n\n    const handleSelection = () => {\n      const activeObject = canvas.getActiveObject();\n\n      if (activeObject && activeObject.type === 'activeSelection') {\n        activeObject.setControlsVisibility({\n          mt: false,\n          mb: false,\n          ml: false,\n          mr: false,\n        });\n\n        activeObject.borderColor = 'green';\n        activeObject.borderDashArray = [2, 4];\n        activeObject.padding = 4;\n        activeObject.cornerColor = 'lightblue';\n        activeObject.cornerSize = 7;\n        activeObject.cornerStrokeColor = 'blue';\n\n        canvas.requestRenderAll();\n      }\n    };\n\n    canvas.on('selection:created', handleSelection);\n    canvas.on('selection:updated', handleSelection);\n\n    return () => {\n      canvas.off('selection:created', handleSelection);\n      canvas.off('selection:updated', handleSelection);\n    };\n  }, [canvas]);\n};\n\nexport default useSelectionHandler;","import { useEffect, useRef } from 'react';\nimport { fabric } from 'fabric';\nimport { createSeat } from '../components/createObject';\nimport { Mode } from '@/zustand/store/eventGuiStore';\n\nconst useMultipleSeatCreator = (\n  canvas: fabric.Canvas | null,\n  toolMode: Mode,\n  setToolMode: (mode: Mode) => void\n) => {\n  const startPointRef = useRef<{ x: number; y: number } | null>(null);\n\n  useEffect(() => {\n    if (!canvas) return;\n\n    const handleMouseDown = (event: fabric.IEvent) => {\n      if (toolMode !== 'multiple-seat') return;\n      const pointer = canvas.getPointer(event.e);\n      startPointRef.current = { x: pointer.x, y: pointer.y };\n    };\n\n    const handleMouseUp = (event: fabric.IEvent) => {\n      if (toolMode !== 'multiple-seat' || !startPointRef.current) return;\n\n      const endPoint = canvas.getPointer(event.e);\n      const startPoint = startPointRef.current;\n\n      const width = Math.abs(endPoint.x - startPoint.x);\n      const height = Math.abs(endPoint.y - startPoint.y);\n\n      const rows = Math.floor(height / 60);\n      const cols = Math.floor(width / 60);\n\n      for (let i = 0; i < rows; i++) {\n        for (let j = 0; j < cols; j++) {\n          const left = startPoint.x + j * 60;\n          const top = startPoint.y + i * 60;\n          const seat = createSeat(left, top, canvas);\n          canvas.add(seat);\n        }\n      }\n\n      canvas.renderAll();\n      startPointRef.current = null;\n      setToolMode('select');\n    };\n\n    canvas.on('mouse:down', handleMouseDown);\n    canvas.on('mouse:up', handleMouseUp);\n\n    return () => {\n      canvas.off('mouse:down', handleMouseDown);\n      canvas.off('mouse:up', handleMouseUp);\n    };\n  }, [canvas, toolMode, setToolMode]);\n};\n\nexport default useMultipleSeatCreator;\n","import { useEffect } from 'react';\nimport { fabric } from 'fabric';\n\nconst useObjectDeletion = (\n  canvas: fabric.Canvas | null,\n  toolAction: string | null\n) => {\n  useEffect(() => {\n    if (!canvas) return;\n\n    const deleteFunction = () => {\n      const activeObject = canvas.getActiveObject();\n      if (!activeObject) return;\n\n      if (activeObject.type === 'activeSelection') {\n        const activeSelection = activeObject as fabric.ActiveSelection;\n        const objects = [...activeSelection.getObjects()];\n        objects.forEach((obj) => canvas.remove(obj));\n      } else {\n        canvas.remove(activeObject);\n      }\n\n      canvas.discardActiveObject();\n      canvas.renderAll();\n    };\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === 'Delete' ||\n        (event.ctrlKey && event.key.toLowerCase() === 'd')\n      ) {\n        deleteFunction();\n      }\n    };\n\n    if (toolAction === 'delete') {\n      deleteFunction();\n    }\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [canvas, toolAction]);\n};\n\nexport default useObjectDeletion;\n","import { useEffect, useRef } from 'react';\nimport { fabric } from 'fabric';\nimport { createSeat, createRect, createText } from '../components/createObject';\nimport { Mode } from '@/zustand/store/eventGuiStore';\n\nconst useObjectCreator = (\n  canvas: fabric.Canvas | null,\n  toolMode: Mode,\n  setToolMode: (mode: Mode) => void\n) => {\n  const startPointRef = useRef<{ x: number; y: number } | null>(null);\n  const rectRef = useRef<fabric.Rect | null>(null);\n  const isDraggingRef = useRef(false);\n\n  useEffect(() => {\n    if (!canvas) return;\n\n    const handleMouseDown = (event: fabric.IEvent) => {\n      const pointer = canvas.getPointer(event.e);\n\n      if (toolMode === 'one-seat') {\n        const seat = createSeat(pointer.x, pointer.y, canvas);\n        canvas.add(seat);\n        canvas.renderAll();\n      } else if (toolMode === 'shape-square') {\n        const rect = createRect(pointer.x, pointer.y);\n        rectRef.current = rect;\n        isDraggingRef.current = false;\n        canvas.add(rect);\n        canvas.setActiveObject(rect);\n        startPointRef.current = { x: pointer.x, y: pointer.y };\n      } else if (toolMode === 'text') {\n        const text = createText(pointer.x, pointer.y);\n        canvas.add(text);\n        canvas.setActiveObject(text);\n        text.enterEditing();\n        text.selectAll();\n      }\n    };\n\n    const handleMouseMove = (event: fabric.IEvent) => {\n      if (\n        toolMode === 'shape-square' &&\n        startPointRef.current &&\n        rectRef.current\n      ) {\n        const pointer = canvas.getPointer(event.e);\n        const width = Math.abs(pointer.x - startPointRef.current.x);\n        const height = Math.abs(pointer.y - startPointRef.current.y);\n        rectRef.current.set({\n          width: width,\n          height: height,\n        });\n        isDraggingRef.current = true;\n        canvas.renderAll();\n      }\n    };\n\n    const handleMouseUp = () => {\n      if (toolMode === 'shape-square' && rectRef.current) {\n        if (!isDraggingRef.current) {\n          // If not dragged, set to default size\n          rectRef.current.set({ width: 100, height: 100 });\n          canvas.renderAll();\n        }\n        startPointRef.current = null;\n        rectRef.current = null;\n        isDraggingRef.current = false;\n      }\n      setToolMode('select');\n    };\n\n    canvas.on('mouse:down', handleMouseDown);\n    canvas.on('mouse:move', handleMouseMove);\n    canvas.on('mouse:up', handleMouseUp);\n\n    return () => {\n      canvas.off('mouse:down', handleMouseDown);\n      canvas.off('mouse:move', handleMouseMove);\n      canvas.off('mouse:up', handleMouseUp);\n    };\n  }, [canvas, toolMode, setToolMode]);\n};\n\nexport default useObjectCreator;\n","import { useEffect } from 'react';\nimport { useEventGuiStore } from '@/zustand';\nimport useClipboardActions from './useClipboardActions';\n\nconst useKeyboardShortcuts = () => {\n  const { canvas, setLastClickedPoint, undo, redo } = useEventGuiStore();\n  const { copySelectedObjects, cutSelectedObjects, pasteObjects } =\n    useClipboardActions();\n\n  useEffect(() => {\n    if (!canvas) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.ctrlKey) {\n        switch (e.key.toLowerCase()) {\n          case 'c':\n            e.preventDefault();\n            copySelectedObjects();\n            break;\n          case 'x':\n            e.preventDefault();\n            cutSelectedObjects();\n            break;\n          case 'v':\n            e.preventDefault();\n            pasteObjects();\n            break;\n          case 'z':\n            e.preventDefault();\n            if (e.shiftKey) {\n              redo();\n            } else {\n              undo();\n            }\n            break;\n          case 'y':\n            e.preventDefault();\n            redo();\n            break;\n        }\n      }\n    };\n\n    const handleMouseDown = (event: fabric.IEvent) => {\n      const pointer = canvas.getPointer(event.e);\n      setLastClickedPoint({ x: pointer.x, y: pointer.y });\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    canvas.on('mouse:down', handleMouseDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n      canvas.off('mouse:down', handleMouseDown);\n    };\n  }, [\n    canvas,\n    copySelectedObjects,\n    cutSelectedObjects,\n    pasteObjects,\n    setLastClickedPoint,\n    undo,\n    redo,\n  ]);\n};\n\nexport default useKeyboardShortcuts;\n","import { useEffect, useRef } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst SNAP_THRESHOLD = 10;\r\n\r\nfunction getSnapPoints(obj: fabric.Object) {\r\n  const left = obj.left ?? 0;\r\n  const top = obj.top ?? 0;\r\n  const width = (obj.width ?? 0) * (obj.scaleX ?? 1);\r\n  const height = (obj.height ?? 0) * (obj.scaleY ?? 1);\r\n  return {\r\n    left,\r\n    right: left + width,\r\n    top,\r\n    bottom: top + height,\r\n    centerX: left + width / 2,\r\n    centerY: top + height / 2,\r\n  };\r\n}\r\n\r\nexport function useSmartSnap(\r\n  canvas: fabric.Canvas | null,\r\n  snapEnabled: boolean\r\n) {\r\n  const guideLines = useRef<fabric.Line[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (!canvas || !snapEnabled) return;\r\n\r\n    function clearGuides() {\r\n      guideLines.current.forEach((line) => canvas.remove(line));\r\n      guideLines.current = [];\r\n    }\r\n\r\n    const handleMoving = (e: fabric.IEvent) => {\r\n      clearGuides();\r\n      const moving = e.target;\r\n      if (!moving) return;\r\n      const movingPoints = getSnapPoints(moving);\r\n      let snapX = moving.left ?? 0;\r\n      let snapY = moving.top ?? 0;\r\n      let snappedX = false;\r\n      let snappedY = false;\r\n      const others = canvas\r\n        .getObjects()\r\n        .filter((obj) => obj !== moving && obj.selectable !== false);\r\n      for (const obj of others) {\r\n        const pts = getSnapPoints(obj);\r\n        // X axis (vertical guides)\r\n        [pts.left, pts.centerX, pts.right].forEach((x) => {\r\n          if (Math.abs(movingPoints.left - x) < SNAP_THRESHOLD) {\r\n            snapX = x;\r\n            snappedX = true;\r\n            // Draw guide\r\n            const line = new fabric.Line([x, 0, x, canvas.height ?? 1000], {\r\n              stroke: 'rgba(0,0,255,0.5)',\r\n              selectable: false,\r\n              evented: false,\r\n              strokeDashArray: [4, 4],\r\n              excludeFromExport: true,\r\n            });\r\n            canvas.add(line);\r\n            guideLines.current.push(line);\r\n          }\r\n          if (Math.abs(movingPoints.centerX - x) < SNAP_THRESHOLD) {\r\n            snapX = x - ((moving.width ?? 0) * (moving.scaleX ?? 1)) / 2;\r\n            snappedX = true;\r\n            const line = new fabric.Line([x, 0, x, canvas.height ?? 1000], {\r\n              stroke: 'rgba(0,0,255,0.5)',\r\n              selectable: false,\r\n              evented: false,\r\n              strokeDashArray: [4, 4],\r\n              excludeFromExport: true,\r\n            });\r\n            canvas.add(line);\r\n            guideLines.current.push(line);\r\n          }\r\n          if (Math.abs(movingPoints.right - x) < SNAP_THRESHOLD) {\r\n            snapX = x - (moving.width ?? 0) * (moving.scaleX ?? 1);\r\n            snappedX = true;\r\n            const line = new fabric.Line([x, 0, x, canvas.height ?? 1000], {\r\n              stroke: 'rgba(0,0,255,0.5)',\r\n              selectable: false,\r\n              evented: false,\r\n              strokeDashArray: [4, 4],\r\n              excludeFromExport: true,\r\n            });\r\n            canvas.add(line);\r\n            guideLines.current.push(line);\r\n          }\r\n        });\r\n        // Y axis (horizontal guides)\r\n        [pts.top, pts.centerY, pts.bottom].forEach((y) => {\r\n          if (Math.abs(movingPoints.top - y) < SNAP_THRESHOLD) {\r\n            snapY = y;\r\n            snappedY = true;\r\n            const line = new fabric.Line([0, y, canvas.width ?? 1000, y], {\r\n              stroke: 'rgba(0,0,255,0.5)',\r\n              selectable: false,\r\n              evented: false,\r\n              strokeDashArray: [4, 4],\r\n              excludeFromExport: true,\r\n            });\r\n            canvas.add(line);\r\n            guideLines.current.push(line);\r\n          }\r\n          if (Math.abs(movingPoints.centerY - y) < SNAP_THRESHOLD) {\r\n            snapY = y - ((moving.height ?? 0) * (moving.scaleY ?? 1)) / 2;\r\n            snappedY = true;\r\n            const line = new fabric.Line([0, y, canvas.width ?? 1000, y], {\r\n              stroke: 'rgba(0,0,255,0.5)',\r\n              selectable: false,\r\n              evented: false,\r\n              strokeDashArray: [4, 4],\r\n              excludeFromExport: true,\r\n            });\r\n            canvas.add(line);\r\n            guideLines.current.push(line);\r\n          }\r\n          if (Math.abs(movingPoints.bottom - y) < SNAP_THRESHOLD) {\r\n            snapY = y - (moving.height ?? 0) * (moving.scaleY ?? 1);\r\n            snappedY = true;\r\n            const line = new fabric.Line([0, y, canvas.width ?? 1000, y], {\r\n              stroke: 'rgba(0,0,255,0.5)',\r\n              selectable: false,\r\n              evented: false,\r\n              strokeDashArray: [4, 4],\r\n              excludeFromExport: true,\r\n            });\r\n            canvas.add(line);\r\n            guideLines.current.push(line);\r\n          }\r\n        });\r\n      }\r\n      if (snappedX) moving.set({ left: snapX });\r\n      if (snappedY) moving.set({ top: snapY });\r\n      canvas.requestRenderAll();\r\n    };\r\n\r\n    const handleModified = () => {\r\n      clearGuides();\r\n      canvas.requestRenderAll();\r\n    };\r\n\r\n    canvas.on('object:moving', handleMoving);\r\n    canvas.on('object:modified', handleModified);\r\n    canvas.on('mouse:up', handleModified);\r\n    return () => {\r\n      canvas.off('object:moving', handleMoving);\r\n      canvas.off('object:modified', handleModified);\r\n      canvas.off('mouse:up', handleModified);\r\n      clearGuides();\r\n    };\r\n  }, [canvas, snapEnabled]);\r\n}\r\n","import { useRef } from 'react';\nimport Toolbar from './toolbar';\nimport Sidebar from './sidebar';\nimport { useEventGuiStore } from '@/zustand';\nimport useCanvasSetup from '@/hooks/useCanvasSetup';\nimport useSelectionHandler from '@/hooks/useSelectionHandler';\nimport useMultipleSeatCreator from '@/hooks/useMultipleSeatCreator';\nimport useObjectDeletion from '@/hooks/useObjectDeletion';\nimport useObjectCreator from '@/hooks/useObjectCreator';\nimport useKeyboardShortcuts from '@/hooks/useKeyboardShortcuts';\nimport useUndoRedo from '@/hooks/useUndoRedo';\nimport { useSmartSnap } from '@/hooks/useSmartSnap';\nimport '@/index.css';\n\nconst SeatCanvas = ({ className }: { className?: string }) => {\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const canvasParent = useRef<HTMLDivElement>(null);\n  const { canvas, setCanvas, toolMode, setToolMode, toolAction, snapEnabled } =\n    useEventGuiStore();\n\n  useCanvasSetup(canvasRef, canvasParent, setCanvas);\n  useSelectionHandler(canvas);\n  useMultipleSeatCreator(canvas, toolMode, setToolMode);\n  useObjectDeletion(canvas, toolAction);\n  useObjectCreator(canvas, toolMode, setToolMode);\n  useUndoRedo();\n  useKeyboardShortcuts();\n  useSmartSnap(canvas, snapEnabled);\n\n  return (\n    <div className={`relative size-full bg-gray-200 ${className}`}>\n      <Toolbar />\n      <div className=\"flex w-full justify-between\">\n        <div\n          className=\"mx-auto w-full max-w-[45rem] bg-gray-100\"\n          ref={canvasParent}\n        >\n          <canvas ref={canvasRef} />\n        </div>\n        <Sidebar />\n      </div>\n    </div>\n  );\n};\n\nexport default SeatCanvas;\n"]}